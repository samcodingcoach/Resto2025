<?xml version="1.0" encoding="utf-8" ?>
<popup:Popup xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:popup="clr-namespace:CommunityToolkit.Maui.Views;assembly=CommunityToolkit.Maui"
             xmlns:ffimageloading="clr-namespace:FFImageLoading.Maui;assembly=FFImageLoading.Maui"
             x:Class="Resto2025.InfoDetailPopup"
             Size="400,600"
             CanBeDismissedByTappingOutsideOfPopup="True">

    <Border BackgroundColor="White" 
            StrokeShape="RoundRectangle 15"
            Padding="20"
            Margin="10">
        
        <Grid RowDefinitions="Auto,*,Auto" RowSpacing="15">
            
            <!-- Header dengan tombol close -->
            <Grid Grid.Row="0" ColumnDefinitions="*,Auto" ColumnSpacing="10">
                <Label Text="Detail Informasi" 
                       FontFamily="FontBold" 
                       FontSize="Large" 
                       TextColor="#333"
                       VerticalOptions="Center"/>
                
                <Button Grid.Column="1"
                        Text="âœ•" 
                        BackgroundColor="Transparent"
                        TextColor="#666"
                        FontSize="Large"
                        WidthRequest="40"
                        HeightRequest="40"
                        Clicked="CloseButton_Clicked"
                        BorderColor="#E0E0E0"
                        CornerRadius="8"/>
            </Grid>
            
            <!-- Konten Artikel -->
            <ScrollView Grid.Row="1" Orientation="Vertical">
                <StackLayout Spacing="15">
                    <!-- Gambar -->
                    <Border StrokeShape="RoundRectangle 10" 
                            StrokeThickness="0" 
                            HeightRequest="200"
                            HorizontalOptions="Fill">
                        <ffimageloading:CachedImage Source="{Binding InfoItem.url_gambar}" 
                                                   Aspect="AspectFill"/>
                    </Border>
                    
                    <!-- Judul -->
                    <Label Text="{Binding InfoItem.judul}"
                           FontFamily="FontBold"
                           FontSize="Medium"
                           TextColor="#333"
                           LineBreakMode="WordWrap"/>
                    
                    <!-- Metadata -->
                    <Grid ColumnDefinitions="Auto,*" ColumnSpacing="10">
                        <Label Text="Oleh:"
                               FontSize="Small"
                               TextColor="#666"
                               VerticalOptions="Center"/>
                        <Label Text="{Binding InfoItem.nama_lengkap}"
                               Grid.Column="1"
                               FontSize="Small"
                               TextColor="#666"/>
                    </Grid>
                    
                    <Grid ColumnDefinitions="Auto,*" ColumnSpacing="10">
                        <Label Text="Waktu:"
                               FontSize="Small"
                               TextColor="#666"
                               VerticalOptions="Center"/>
                        <Label Text="{Binding InfoItem.waktu_tampil}"
                               Grid.Column="1"
                               FontSize="Small"
                               TextColor="#666"/>
                    </Grid>
                    
                    <!-- Divider -->
                    <BoxView HeightRequest="1"
                             BackgroundColor="#E0E0E0"
                             Margin="0,10"/>
                    
                    <!-- Isi konten -->
                    <Label Text="{Binding InfoItem.isi}"
                           FontSize="Small"
                           TextColor="#333"
                           LineBreakMode="WordWrap"/>
                    
                    <!-- Link jika ada -->
                    <StackLayout BindableLayout.ItemsSource="{Binding Links}">
                        <BindableLayout.ItemTemplate>
                            <DataTemplate>
                                <Border BackgroundColor="#F0F8FF"
                                        StrokeShape="RoundRectangle 8"
                                        Padding="10"
                                        Margin="0,5">
                                    <StackLayout Orientation="Horizontal" Spacing="10">
                                        <Label Text="ðŸ”—" 
                                               FontSize="Small"
                                               VerticalOptions="Center"/>
                                        <Label Text="{Binding}"
                                               TextColor="CadetBlue"
                                               FontSize="Small"
                                               LineBreakMode="WordWrap"
                                               VerticalOptions="Center"/>
                                    </StackLayout>
                                </Border>
                            </DataTemplate>
                        </BindableLayout.ItemTemplate>
                    </StackLayout>
                    
                </StackLayout>
            </ScrollView>
            
        </Grid>
        
    </Border>
    
</popup:Popup>
